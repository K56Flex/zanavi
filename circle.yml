machine:
  timezone:
    Europe/Vienna
dependencies:
  cache_directories:
    - ~/.android
  pre:
    - sudo apt-get update
    - sudo apt-get install libpng12-dev
    - sudo apt-get install librsvg2-bin 
    - sudo apt-get install libfreetype6-dev
    - sudo apt-get install libdbus-glib-1-dev
    - sudo apt-get install g++
    - sudo apt-get install gettext
    # - sudo apt-get install openjdk-8-jdk
    - sudo apt-get install ant
    - sudo apt-get install libsaxonb-java
    - sudo apt-get install lib32stdc++6
    - sudo apt-get install lib32z1
    - bash ci/do_android.sh
test:
  pre:
    - emulator -avd circleci-android22 -no-audio -no-window:
        background: true
        parallel: true
    - circle-android wait-for-boot
  override:
    - adb install ~/android-build/navit/android/bin/zanavi_debug_signed_aligned.apk
    - fb-adb shell "pwd"
    - fb-adb shell "ls -al /"
    - fb-adb shell "df"
